{"version":3,"sources":["components/Playground/index.js","containers/ProductsPage/index.js"],"names":["Playground","props","graph","joint","dia","Graph","createTemplate","bind","removeProduct","productTemplates","this","products","map","product","name","join","p","deleteProduct","paper","Paper","el","ReactDOM","findDOMNode","refs","placeholder","width","height","gridSize","model","interactive","background","color","shapes","html","Element","basic","Rect","extend","defaults","util","deepSupplement","type","attrs","rect","stroke","prototype","ElementView","template","initialize","_","bindAll","apply","arguments","$box","$","find","on","evt","stopPropagation","e","target","parentNode","innerHTML","appendChild","css","top","position","render","$el","prepend","updateBox","bbox","getBBox","text","get","left","x","y","transform","size","label","select","rectInit","Circle","rectFinal","l1","Link","source","id","l2","attr","display","fill","d","addCells","console","log","el1","attributes","optc","l","ref","React","Component","Product","className","style","textAlign","margin","modifiers","modifier","float","cost","marginTop","onClick","addModifier","ProductsPage","state","newProduct","isVisiblePrdForm","newPrdSelect","prdsSelect","selectedPrd","createModifierBlock","createModifierProduct","isVisibleCreateModifier","createModifierName","createModifierHasCost","createModifierCost","isVisibleChart","handleInputChange","createProduct","createModifier","event","value","checked","setState","concat","updatedPrds","filter","blockName","productName","modName","modCost","finder","prd","productToModify","productIndex","findIndex","backgroundColor","zIndex","right","onChange"],"mappings":"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","file":"static/js/21.48f5d39c.chunk.js","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport joint from 'jointjs/index';\nimport { layout, shapes } from 'jointjs';\nimport _ from 'lodash';\nimport $ from 'jquery';\n\nclass Playground extends React.Component {\n\n  constructor(props){\n    super(props);\n    this.graph = new joint.dia.Graph();\n    this.createTemplate = this.createTemplate.bind(this);\n    this.removeProduct = this.removeProduct.bind(this);\n  }\n\n  createTemplate() {\n\n    const productTemplates = this.props.products.map(product => {\n      return `<div class=\"btn btn-info\" style=\"width:100%; margin-bottom:4px;\">${product.name}</div>`;\n    });\n\n    return `<div class=\"card\" style=\"padding: 8px; border: none;\">${productTemplates.join(\"\")}</div>`;\n  };\n\n  removeProduct(p){\n    this.props.deleteProduct(p);\n  };\n\n  componentDidMount(){\n    this.paper = new joint.dia.Paper({\n      el: ReactDOM.findDOMNode(this.refs.placeholder),\n      width: 1200,\n      height: 400,\n      gridSize: 10,\n      model: this.graph,\n      interactive: false,\n      background: {color: '#EFF2F7'},   \n    });\n\n    // Create a custom element.\n    // ------------------------\n\n    joint.shapes.html = {};\n    joint.shapes.html.Element = joint.shapes.basic.Rect.extend({\n        defaults: joint.util.deepSupplement({\n            type: 'html.Element',\n            attrs: {\n                rect: { stroke: 'none', 'fill-opacity': 0 }\n            }\n        }, joint.shapes.basic.Rect.prototype.defaults)\n    });\n\n\n\n    // Create a custom view for that element that displays an HTML div above it.\n    // -------------------------------------------------------------------------\n\n    joint.shapes.html.ElementView = joint.dia.ElementView.extend({\n\n      template: this.createTemplate(),\n      initialize: function() {\n          _.bindAll(this, 'updateBox');\n          joint.dia.ElementView.prototype.initialize.apply(this, arguments);\n          this.$box = $(_.template(this.template)());\n          // Prevent paper from handling pointerdown.\n          this.$box.find('input,select').on('mousedown click', function(evt) {\n              evt.stopPropagation();\n          });\n          // This is an example of reacting on the input change and storing the input data in the cell model.\n          this.$box.find('.btn').on('click', _.bind((evt) => {\n            const e = evt.target;\n            let p = e.parentNode;\n            p.innerHTML = '';\n            p.appendChild(e);\n            this.$box.css({height: '0px', top:'-8px', position: 'absolute'});\n            this.removeProduct(e.innerHTML);\n          }, this));\n      },\n      render: function() {\n          joint.dia.ElementView.prototype.render.apply(this, arguments);\n          this.paper.$el.prepend(this.$box);\n          this.updateBox();\n          return this;\n      },\n      updateBox: function() {\n          // Set the position and dimension of the box so that it covers the JointJS element.\n          var bbox = this.model.getBBox();\n          // Example of updating the HTML with a data stored in the cell model.\n          this.$box.find('label').text(this.model.get('label'));\n          this.$box.find('span').text(this.model.get('select'));\n          this.$box.css({\n              width: bbox.width,\n              height: bbox.height,\n              left: bbox.x,\n              top: bbox.y,\n              transform: 'rotate(' + (this.model.get('angle') || 0) + 'deg)'\n          });\n      },\n      removeProduct: (p) => this.removeProduct(p)\n  });\n\n\n\n    // Create JointJS elements and add them to the graph as usual.\n    // -----------------------------------------------------------\n\n    var el1 = new joint.shapes.html.Element({\n      position: { x: 300, y: 0 },\n      size: { width: 170, height: 0 },\n      label: 'I am HTML',\n      select: 'one'\n  });\n\n\n\n\n    const rectInit = new joint.shapes.basic.Circle({ \n      position: { x: 0, y: 0 },\n      size: { width: 30, height: 30 },\n      attrs: { text: { text: '+' } }\n    });\n\n    const rect = new joint.shapes.basic.Rect({ \n      position: { x: 50, y: 0 },\n      size: { width: 130, height: 30 },\n      attrs: { text: { text: 'lista de productos' } }\n    });\n\n    const rectFinal = new joint.shapes.basic.Circle({ \n      position: { x: 200, y: 0 },\n      size: { width: 30, height: 30 },\n      attrs: { text: { text: '+' } }\n    });\n    \n\n    const l1 = new joint.dia.Link({ source: { id: rectInit.id }, target: { id: rect.id }  });\n    const l2 = new joint.dia.Link({ source: { id: rect.id }, target: { id: rectFinal.id }  });\n\n    l1.attr({\n      '.marker-arrowhead[end=\"source\"]': { display: 'none'},\n      '.marker-arrowhead[end=\"target\"]': { fill: 'red', d: 'M 10 0 L 0 5 L 10 10 z' },\n      '.tool-remove': { display: 'none'},\n      '.tool-options': { display: 'none'},\n    });\n\n    l2.attr({\n      '.marker-arrowhead[end=\"source\"]': { display: 'none'},\n      '.marker-arrowhead[end=\"target\"]': { fill: 'red', d: 'M 10 0 L 0 5 L 10 10 z' },\n      '.tool-remove': { display: 'none'},\n      '.tool-options': { display: 'none'},\n    });\n\n    this.graph.addCells([rectInit, rect, rectFinal, l1, l2]);\n\n\n    this.paper.on('element:pointerclick', (e, evt, x, y) => {\n\n\n      console.log(e);\n      console.log(evt);\n      console.log(x);\n      console.log(y);\n\n      if(e.model.attr('text/text') === '+') {\n\n        var el1 = new joint.shapes.html.Element({\n          position: { x: e.model.attributes.position.x + e.model.attributes.size.width + 30 , y: e.model.attributes.position.y },\n          size: { width: 120, height: 40 },\n        });\n  \n        const optc = new joint.shapes.basic.Circle({ \n          position: { x: el1.attributes.position.x + el1.attributes.size.width + 30, y: el1.attributes.position.y },\n          size: { width: 30, height: 30 },\n          attrs: { text: { text: '+' } }\n        });\n  \n        const l = new joint.dia.Link({ source: { id: e.model.id }, target: { id: el1.id }  });\n        const l2 = new joint.dia.Link({ source: { id: el1.id }, target: { id: optc.id }  });\n  \n        l.attr({\n          '.marker-arrowhead[end=\"source\"]': { display: 'none'},\n          '.marker-arrowhead[end=\"target\"]': { fill: 'red', d: 'M 10 0 L 0 5 L 10 10 z' },\n          '.tool-remove': { display: 'none'},\n          '.tool-options': { display: 'none'},\n        });\n  \n        l2.attr({\n          '.marker-arrowhead[end=\"source\"]': { display: 'none'},\n          '.marker-arrowhead[end=\"target\"]': { fill: 'red', d: 'M 10 0 L 0 5 L 10 10 z' },\n          '.tool-remove': { display: 'none'},\n          '.tool-options': { display: 'none'},\n        });\n  \n        this.graph.addCells([el1, optc, l, l2]);\n      }\n\n\n    });\n\n  }\n\n  render(){\n    return (<div id=\"playground\" ref=\"placeholder\"></div>);\n  }\n\n}\n\nexport default Playground;","import React from 'react';\nimport joint from 'jointjs/index';\nimport ReactDOM from 'react-dom';\nimport Playground from './../../components/Playground';\n\n\nconst Product = (props) => {\n  return(\n    <div className=\"card\" style={{width: '18rem', textAlign:'left', margin:'8px'}}>\n      <div className=\"card-body\">\n        <h5 className=\"card-title\">{props.name}</h5>\n        <h6 className=\"card-subtitle mb-2 text-muted\">Tipo: {props.type}</h6>\n        \n        {props.modifiers.map((modifier) => {\n          return (\n            <div>\n              <button type=\"button\" className=\"btn btn-info\" style={{width:'100%', margin:'4px 0 4px 0'}}>\n                <span style={{float:'left'}}>{modifier.name}</span>\n                <span style={{float:'right'}}>{modifier.cost}</span>\n              </button>\n            </div>\n        )})}\n\n\n        <div className=\"btn btn-primary\" style={{width:'100%', marginTop:'24px'}} onClick={() => {props.addModifier(props.name, props.type)}}>+</div>\n      </div>\n    </div>\n  )\n}\n\n\n\nclass ProductsPage extends React.Component {\n\n  constructor(props){\n    super(props)\n    this.graph = new joint.dia.Graph();\n    this.state= {\n      newProduct: '',\n      products:[\n        {name: 'Tamaño', \n        type: 'Producto a', \n        modifiers:[\n          {name: 'grande', cost: '50'}, \n          {name: 'mediano', cost: '40'}, \n          {name: 'peque', cost: '30'}\n        ]},\n\n        {name: 'Tipo de leche', \n        type: 'Producto a', \n        modifiers:[\n          {name: 'natural', cost: '0'}, \n          {name: 'deslactosada', cost: '10'}, \n          {name: 'almendra', cost: '15'}\n        ]},\n\n        {name: 'Textura', \n        type: 'Producto a', \n        modifiers:[\n          {name: 'iced', cost: '0'}, \n          {name: 'cold', cost: '0'}, \n          {name: 'hot', cost: '0'}\n        ]},\n\n    ],\n      isVisiblePrdForm: false,\n      newPrdSelect: '',\n      prdsSelect:['producto a'],\n      selectedPrd: '',\n      createModifierBlock: '',\n      createModifierProduct:'',\n      isVisibleCreateModifier: false,\n      createModifierName:'',\n      createModifierHasCost: false,\n      createModifierCost: '',\n      isVisibleChart: false,\n    }\n    this.handleInputChange = this.handleInputChange.bind(this)\n    this.createProduct = this.createProduct.bind(this)\n    this.deleteProduct = this.deleteProduct.bind(this)\n    this.addModifier = this.addModifier.bind(this)\n    this.createModifier = this.createModifier.bind(this)\n  }\n\n  handleInputChange(event) {\n    const target = event.target;\n    const value = target.type === 'checkbox' ? target.checked : target.value;\n    const name = target.name;\n\n    this.setState({\n      [name]: value\n    });\n  }\n\n  createProduct(){\n    const products = this.state.products\n    const newProduct = this.state.newProduct\n    const type = this.state.selectedPrd\n    this.setState({\n      products: products.concat({\n        name: newProduct,\n        type: type,\n        modifiers:[]\n      }), \n      newProduct: '',\n    })\n  }\n\n  deleteProduct(p){\n    let products = this.state.products;\n    let updatedPrds = products.filter(product => product.name !== p);\n    this.setState({products: updatedPrds});\n  }\n\n  addModifier(blockName, productName){\n    this.setState({\n      createModifierBlock: blockName,\n      createModifierProduct: productName,\n      isVisibleCreateModifier: true,\n    })\n  }\n\n  createModifier(){\n    const modName = this.state.createModifierName\n    const modCost = this.state.createModifierCost\n    const products = this.state.products\n    const finder = prd => prd.name === this.state.createModifierBlock\n    const productToModify = products.find(finder)\n    const productIndex = products.findIndex(finder)\n\n    productToModify.modifiers = \n      productToModify.modifiers.concat({\n      name: modName,\n      cost: modCost\n    })\n\n    products[productIndex] = productToModify\n\n    this.setState({\n      products: products,\n      isVisibleCreateModifier: false,\n      createModifierName: '',\n      createModifierCost: '',\n    })\n  }\n\n\n  render(){\n    return (\n      <div>\n        <h1>Blocks</h1>\n\n        <div className={\"form-group \" + (this.state.isVisibleChart ? '' : 'd-none')} style={{position:'absolute', width:'100vw', height:'100vh', backgroundColor:'#EFF2F7', zIndex:'1'}}>\n          <Playground products={this.state.products} deleteProduct={this.deleteProduct} />\n        </div>\n\n        <div className={\"form-group \" + (this.state.isVisibleCreateModifier ? '' : 'd-none')} style={{position: 'absolute', right:'0', top:'0', margin:'16px 16px 0 0', textAlign:'left'}}>\n          <label>Agregar Modificador</label>\n          <input type=\"text\" name=\"createModifierName\" className=\"form-control\" placeholder=\"Modificador\" onChange={this.handleInputChange}/>\n          <div className=\"form-check\">\n            <input className=\"form-check-input\" name=\"createModifierHasCost\" type=\"checkbox\" checked={this.state.createModifierHasCost} onChange={this.handleInputChange}/>\n            <label className=\"form-check-label\">\n              Tiene costo?\n            </label>\n          </div>\n          <div className={\"form-group \" + (this.state.createModifierHasCost ? '' : 'd-none')}>\n            <input type=\"text\" name=\"createModifierCost\" className=\"form-control\" placeholder=\"$ Costo\" onChange={this.handleInputChange}/>\n          </div>\n          <div className=\"btn btn-primary\" style={{width:'100%', marginTop:'8px'}} onClick={this.createModifier}> Agregar </div>\n        </div>\n\n        <div className={\"form-group \" + (this.state.isVisiblePrdForm ? '' : 'd-none')} style={{position: 'absolute', right:'0', top:'0', margin:'16px 16px 0 0', textAlign:'left'}}>\n          <label>Agregar Producto</label>\n          <input type=\"text\" value={this.state.newPrdSelect} className=\"form-control\" name=\"newPrdSelect\" onChange={this.handleInputChange} placeholder=\"Agregar Producto\"/>\n          <div className=\"btn btn-primary\" style={{width:'100%', marginTop:'8px'}} onClick={()=> {this.setState({prdsSelect: this.state.prdsSelect.concat(this.state.newPrdSelect), isVisiblePrdForm: false, newPrdSelect:''})}}> Agregar </div>\n        </div>\n\n        <div className=\"row justify-content-center\">\n          <div className=\"col-6 form-group\" style={{textAlign:'left'}}>\n            <label>Nuevo</label>\n            <input type=\"text\" value={this.state.newProduct} className=\"form-control\" placeholder=\"Nuevo\" name=\"newProduct\" onChange={this.handleInputChange} />\n          </div>\n        </div>\n\n        <div className=\"row justify-content-center\">\n          <div className=\"col-6 form-group\" style={{textAlign:'left'}}>\n            <div className=\"input-group\">\n              <select className=\"form-control\" name=\"selectedPrd\" onChange={this.handleInputChange}>\n                <option>Seleccionar un producto</option>\n                {this.state.prdsSelect.map((product)=>\n                  <option>{product}</option>\n                )}\n              </select>\n              <div className=\"input-group-append\" onClick={()=>{this.setState({isVisiblePrdForm: true})}}>\n                <span className=\"input-group-text\"> + </span>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div className=\"row justify-content-center\">\n          <div className=\"btn btn-primary\" onClick={this.createProduct} style={{margin:'20px'}}>Crear</div>\n          <div className=\"btn btn-primary\" onClick={()=>this.setState({isVisibleChart: true})} style={{margin:'20px'}}>Crear flujos</div>\n        </div>\n        <div className=\"row\">\n            {this.state.products.map((product) => {\n              return (\n                <Product name={product.name} type={product.type} modifiers={product.modifiers} addModifier={this.addModifier}/>\n              )\n            })}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default ProductsPage;"],"sourceRoot":""}