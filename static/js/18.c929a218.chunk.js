(window.webpackJsonpps=window.webpackJsonpps||[]).push([[18],{432:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(107),o=a.n(c),i=a(17),s=a(10),l=a(74),u=a(76),d=a(80),m=a(77),p="ps/ProductsPage/LOAD_PRODUCTS",b="ps/ProductsPage/SAVE_PRODUCT",f="ps/ProductsPage/CREATE_PRODUCT",v="ps/ProductsPage/CREATE_MODIFIER",g="ps/ProductsPage/MAKE_FORM_VISIBLE",E="ps/ProductsPage/CHANGE_PRODUCT_NAME",C="ps/ProductsPage/CHANGE_PRODUCT_PRICE",P="ps/ProductsPage/CHANGE_PRODUCT_SELECT",h="ps/ProductsPage/CHANGE_MOD_NAME",y="ps/ProductsPage/CHANGE_MOD_PRICE",O="ps/ProductsPage/CHANGE_MOD_TYPE",j="ps/ProductsPage/CHANGE_CAT_NAME",k="ps/ProductsPage/CHANGE_CAT_TYPE",N="ps/ProductsPage/SAVE_CATEGORY",x="ps/ProductsPage/ADD_MODIFIER",S="ps/ProductsPage/MAKE_MOD_FORM_VISIBLE";function w(e){return{type:f,product:e}}function T(e){return{type:x,product:e}}var V=a(81),M={products:[],isCreatePrdFormVisible:!1,isCreateModFormVisible:!1,isCreateCatFormVisible:!1,isCreateModBtnVisible:!1,productName:"",productPrice:"",selectedProduct:"",modName:"",modPrice:"",catName:"",catType:"",productToAddMod:""},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;return Object(V.a)(e,(function(e){switch(t.type){case E:e.productName=t.name;break;case C:e.productPrice=t.price;break;case P:e.selectedProduct=t.select,"noProduct"===t.select?(e.isCreateModBtnVisible=!1,e.isCreateCatFormVisible=!1):!1===e.isCreateCatFormVisible&&(e.isCreateModBtnVisible=!0);break;case h:e.modName=t.name;break;case y:e.modPrice=t.price;break;case O:e.modType=t.modType;break;case j:e.catName=t.name;break;case k:e.catType=t.catType;break;case p:e.products=t.products;break;case b:break;case f:e.products=e.products.concat([t.product]),e.productName="",e.productPrice="",e.isCreatePrdFormVisible=!1;break;case N:break;case v:var a=e.products,r=a.findIndex((function(e){return e.name=t.productName}));a[r].modifiers=a[r].modifiers.concat([t.modifier]),e.products=a;break;case g:switch(t.form){case"createProductForm":e.isCreatePrdFormVisible=t.visibility;break;case"createModifierForm":e.isCreateModFormVisible=t.visibility,e.modName="",e.modPrice="",e.modType="",e.isCreateModBtnVisible=!t.visibility;break;case"createModifierBtn":e.isCreateModBtnVisible=t.visibility;break;case"createCatForm":e.isCreateCatFormVisible=t.visibility}break;case x:var n=e.products.findIndex((function(e){return e._id===t.product._id}));e.products[n]=t.product,e.isCreateCatFormVisible=!1,e.catName="";break;case S:e.productToAddMod=t.productId}}))},_=function(e){return e.products||M},A=function(){return Object(l.a)(_,(function(e){return{name:e.catName,type:e.catType}}))},R=function(){return Object(l.a)(_,(function(e){return e.products.find((function(t){return t._id===e.selectedProduct}))}))},I=function(){return Object(l.a)(_,(function(e){return{name:e.productName,modifiers:[],type:0,price:e.productPrice}}))},D=a(72),B=a(90),G=a.n(B),H=a(93),L=a(78),U=G.a.mark(Y),J=G.a.mark(K),z=G.a.mark(q);function Y(){var e,t,a;return G.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,Object(H.c)(I());case 2:return e=r.sent,t="".concat(Object(D.a)(),"/products"),r.prev=4,a=localStorage.getItem("PointOfSaleToken"),r.next=8,Object(H.a)(L.a,t,{body:JSON.stringify(e),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a)},method:"POST"});case 8:return r.sent,r.next=11,Object(H.b)(w(e));case 11:r.next=17;break;case 13:r.prev=13,r.t0=r.catch(4),console.log("err"),console.log(r.t0);case 17:case"end":return r.stop()}}),U,null,[[4,13]])}function K(){var e,t,a,r,n;return G.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(H.c)(A());case 2:return e=c.sent,c.next=5,Object(H.c)(R());case 5:return t=c.sent,a="".concat(Object(D.a)(),"/products/").concat(t._id),c.prev=7,r=localStorage.getItem("PointOfSaleToken"),t.modifiers=t.modifiers.concat([e]),c.next=12,Object(H.a)(L.a,a,{body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},method:"PATCH"});case 12:return n=c.sent,console.log("saga"),console.log(n),c.next=17,Object(H.b)(T(n));case 17:c.next=23;break;case 19:c.prev=19,c.t0=c.catch(7),console.log("err"),console.log(c.t0);case 23:case"end":return c.stop()}}),J,null,[[7,19]])}function q(){return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(H.d)(b,Y);case 2:return e.next=4,Object(H.d)(N,K);case 4:case"end":return e.stop()}}),z)}a.d(t,"ProductPage",(function(){return ae})),a.d(t,"mapDispatchToProps",(function(){return ne}));var Q="products",W=function(e){var t=e.name,a=e.modifier,r=e.makeFormVisible;return n.a.createElement("div",{className:"card",style:{width:"18rem",margin:"8px",display:"inline-block"}},n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},a.name),n.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"Tipo: ",function(e){switch(e){case"0":return"Opcional";case"1":return"Obligatorio";case"2":return"Seleccion multiple"}}(a.type)),n.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"Producto: ",t),a.options.map((function(e){return n.a.createElement("div",{className:"btn btn-dark",style:{width:"100%",margin:"4px"}},e.name)})),n.a.createElement("div",{className:"btn btn-primary",style:{width:"100%",marginTop:"24px"},onClick:function(){return r("createCatForm",!0)}},"+")))},X=function(e){var t=e.products,a=e.makeFormVisible,r=e.onChangePrdct;return n.a.createElement("div",{class:"input-group mb-3",style:{marginTop:"8px",padding:"0 20px"}},n.a.createElement("select",{class:"custom-select",onChange:function(e){return r("mod",e.target.value)}},n.a.createElement("option",{selected:!0,value:"noProduct"},"Lista de Productos"),t.map((function(e){return n.a.createElement("option",{value:e._id},e.name)}))),n.a.createElement("div",{class:"input-group-append"},n.a.createElement("label",{class:"input-group-text",onClick:function(){return a("createProductForm",!0)}}," Agregar ")))},Z=function(e){var t=e.name,a=e.price,r=e.onChangePrdct,c=e.makeFormVisible,o=e.onSaveProduct;return n.a.createElement("div",{class:"card",style:{width:"320px",textAlign:"left"}},n.a.createElement("div",{className:"close",style:{position:"absolute",top:"8px",right:"16px",cursor:"pointer"},onClick:function(){return c("createProductForm",!1)}},n.a.createElement("span",{"aria-hidden":"true"},"\xd7")),n.a.createElement("div",{class:"card-body"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"exampleInputEmail1"},"Nombre del Producto"),n.a.createElement("input",{type:"text",class:"form-control",placeholder:"Nombre del Producto",value:t,onChange:function(e){return r("name",e.target.value)}})),n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"exampleInputEmail1"},"Precio del producto"),n.a.createElement("input",{type:"text",class:"form-control",placeholder:"Precio",value:a,onChange:function(e){return r("price",e.target.value)}})),n.a.createElement("div",{className:"btn btn-dark",style:{width:"100%"},onClick:o},"Crear")))},$=function(e){var t=e.makeFormVisible,a=e.onChangeMod,r=e.newMod;return n.a.createElement("div",{class:"card",style:{width:"320px",textAlign:"left"}},n.a.createElement("div",{className:"close",style:{position:"absolute",top:"8px",right:"16px",cursor:"pointer"},onClick:function(){return t("createModifierForm",!1)}},n.a.createElement("span",{"aria-hidden":"true"},"\xd7")),n.a.createElement("div",{class:"card-body"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"exampleInputEmail1"},"Nombre"),n.a.createElement("input",{type:"text",class:"form-control",placeholder:"Nombre del Modificador",value:r.name,onChange:function(e){return a("name",e.target.value)}})),n.a.createElement("div",{class:"form-group"},n.a.createElement("label",{for:"exampleInputEmail1"},"Precio"),n.a.createElement("input",{type:"text",class:"form-control",placeholder:"Precio",value:r.price,onChange:function(e){return a("price",e.target.value)}})),n.a.createElement("div",{className:"btn btn-dark",style:{width:"100%"}},"Crear")))},ee=function(e){var t=e.makeFormVisible;return n.a.createElement("div",{class:"input-group",style:{marginTop:"8px",padding:"0 20px"}},n.a.createElement("div",{className:"btn btn-dark",style:{width:"480px"},onClick:function(){return t("createCatForm",!0)}},"Crear Modificador"))},te=function(e){var t=e.makeFormVisible,a=e.newCat,r=e.onChangeCat,c=e.onSaveCategory;return n.a.createElement("div",{class:"card",style:{width:"320px",textAlign:"left"}},n.a.createElement("div",{className:"close",style:{position:"absolute",top:"8px",right:"16px",cursor:"pointer"},onClick:function(){return t("createCatForm",!1)}},n.a.createElement("span",{"aria-hidden":"true"},"\xd7")),n.a.createElement("div",{class:"card-body"},n.a.createElement("div",{class:"form-group"},n.a.createElement("label",null,"Nombre"),n.a.createElement("input",{type:"text",class:"form-control",placeholder:"Nombre de la categoria",value:a.name,onChange:function(e){return r("name",e.target.value)}})),n.a.createElement("div",{class:"form-group"},n.a.createElement("label",null,"Tipo"),n.a.createElement("select",{class:"custom-select",onChange:function(e){return r("type",e.target.value)}},n.a.createElement("option",{selected:!0},"Tipos de Modificador"),n.a.createElement("option",{value:"0"},"Opcional"),n.a.createElement("option",{value:"1"},"Obligatorio"),n.a.createElement("option",{value:"2"},"Seleccion Multiple"))),n.a.createElement("div",{className:"btn btn-dark",style:{width:"100%"},onClick:c},"Crear")))};function ae(e){var t=e.products,a=e.formStatus,c=e.newProduct,i=e.newMod,s=e.newCat,l=(e.selected,e.onLoadProducts),p=e.makeFormVisible,b=e.onChangePrdct,f=e.onChangeMod,v=e.onChangeCat,g=e.onSaveProduct,E=e.onSaveCategory;return Object(u.a)({key:Q,reducer:F}),Object(d.a)({key:Q,saga:q}),Object(r.useEffect)((function(){var e="".concat(Object(D.a)(),"/products");try{var t=localStorage.getItem("PointOfSaleToken");o.a.get(e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var t=e.data;console.log(t.data),l(t.data)}))}catch(a){console.log("err"),console.log(a)}}),[]),n.a.createElement("div",{className:"container-fluid",style:{padding:"0px"}},n.a.createElement(m.a,{is_active:"product"}),n.a.createElement("div",{className:"row justify-content-center"},n.a.createElement("div",{className:"col-12 col-md-5"},n.a.createElement("h1",null,"Productos")),n.a.createElement("div",{className:"col-12 col-md-5"},n.a.createElement(X,{products:t,makeFormVisible:p,onChangePrdct:b}),a.isVisibleCreateModBtn?n.a.createElement(ee,{makeFormVisible:p}):null)),n.a.createElement("div",{className:"row justify-content-center"},a.isVisibleCreateProd?n.a.createElement(Z,{name:c.name,price:c.price,onChangePrdct:b,makeFormVisible:p,onSaveProduct:g}):null),n.a.createElement("div",{className:"row justify-content-center"},a.isVisibleCreateMod?n.a.createElement($,{makeFormVisible:p,newMod:i,onChangeMod:f}):null),n.a.createElement("div",{className:"row justify-content-center"},a.isVisibleCreateCat?n.a.createElement(te,{makeFormVisible:p,newCat:s,onChangeCat:v,onSaveCategory:E}):null),n.a.createElement("div",{className:"row"},t.map((function(e){return e.modifiers.map((function(t){return n.a.createElement(W,{name:e.name,modifier:t,makeFormVisible:p})}))}))))}var re=Object(l.b)({products:Object(l.a)(_,(function(e){return e.products})),formStatus:Object(l.a)(_,(function(e){return{isVisibleCreateProd:e.isCreatePrdFormVisible,isVisibleCreateMod:e.isCreateModFormVisible,isVisibleCreateModBtn:e.isCreateModBtnVisible,isVisibleCreateCat:e.isCreateCatFormVisible}})),newProduct:I(),newMod:Object(l.a)(_,(function(e){return{name:e.modName,price:e.modPrice}})),newCat:A(),selected:R()});function ne(e){return{onLoadProducts:function(t){return e(function(e){return{type:p,products:e}}(t))},makeFormVisible:function(t,a){return e(function(e,t){return{type:g,form:e,visibility:t}}(t,a))},onChangePrdct:function(t,a){return e(function(e,t){switch(e){case"name":return{type:E,name:t};case"price":return{type:C,price:t};case"mod":return{type:P,select:t}}}(t,a))},onChangeMod:function(t,a){return e(function(e,t){switch(e){case"name":return{type:h,name:t};case"price":return{type:y,price:t};case"modType":return{type:O,modType:t}}}(t,a))},onChangeCat:function(t,a){return e(function(e,t){switch(e){case"name":return{type:j,name:t};case"type":return{type:k,catType:t}}}(t,a))},onSaveProduct:function(){return e({type:b})},onSaveCategory:function(){return e({type:N})}}}var ce=Object(i.c)(re,ne);t.default=Object(s.d)(ce,r.memo)(ae)},70:function(e,t,a){"use strict";function r(e){return!0}a.d(t,"a",(function(){return r}))},72:function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=function(){return"https://e7c274ef.ngrok.io"}},76:function(e,t,a){"use strict";a(65),a(66),a(68),a(67),a(69);var r=a(0),n=a.n(r),c=(a(14),a(17)),o=a(1),i=a.n(o),s=a(73),l=a(70),u=a(31);function d(e,t){return function(a,r){t||Object(l.a)(e),i()(Object(s.isString)(a)&&!Object(s.isEmpty)(a)&&Object(s.isFunction)(r),"(src/utils...) injectReducer: Expected `reducer` to be a reducer function"),Reflect.has(e.injectedReducers,a)&&e.injectedReducers[a]===r||(e.injectedReducers[a]=r,e.replaceReducer(Object(u.a)(e.injectedReducers)))}}function m(e){return Object(l.a)(e),{injectReducer:d(e,!0)}}a.d(t,"a",(function(){return p}));var p=function(e){var t=e.key,a=e.reducer,r=n.a.useContext(c.b);n.a.useEffect((function(){m(r.store).injectReducer(t,a)}),[])}},77:function(e,t,a){"use strict";var r=a(65),n=a(66),c=a(68),o=a(67),i=a(69),s=a(0),l=a.n(s),u=a(5),d=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={is_loggedIn:!0},a}return Object(i.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},this.state.is_loggedIn?null:l.a.createElement(u.a,{to:"/PS/login"}),l.a.createElement("a",{className:"navbar-brand",href:"#"},"PS"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"dashboard"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/dashboard"},"Dashboard")),l.a.createElement("li",{className:"employees"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/employees"},"Empleados")),l.a.createElement("li",{className:"product"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/ultimate"},"Productos")),l.a.createElement("li",{className:"analytics"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/analytics"},"Analytics")),l.a.createElement("li",{className:"flow"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/flow"},"Flujo")),l.a.createElement("li",{className:"cash"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/cash"},"Caja"))),l.a.createElement("span",{className:"navbar-text",style:{cursor:"pointer"},onClick:function(){localStorage.removeItem("PointOfSaleToken"),e.setState({is_loggedIn:!1})}},"Cerrar Sesi\xf3n")))}}]),t}(l.a.Component);t.a=d},78:function(e,t,a){"use strict";function r(e){return 204===e.status||205===e.status?null:e.json()}function n(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function c(e,t){return fetch(e,t).then(n).then(r)}a.d(t,"a",(function(){return c}))},80:function(e,t,a){"use strict";a(65),a(66),a(68),a(67),a(69);var r=a(0),n=a.n(r),c=(a(14),a(17)),o=a(30),i=a(1),s=a.n(i),l=a(73),u=a(70),d="@@saga-injector/daemon",m="@@saga-injector/once-till-unmount";function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function b(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var f=function(e){return s()(Object(l.isString)(e)&&!Object(l.isEmpty)(e),"(app/utils...) injectSaga: Expected `key` to be a non empty string")};function v(e,t){return function(a){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;t||Object(u.a)(e);var c=b({},r,{mode:r.mode||d}),o=c.saga,i=c.mode;f(a);var s=Reflect.has(e.injectedSagas,a);(!s||s&&i!==d&&i!==m)&&(e.injectedSagas[a]=b({},c,{task:e.runSaga(o,n)}))}}function g(e,t){return function(a){if(t||Object(u.a)(e),f(a),Reflect.has(e.injectedSagas,a)){var r=e.injectedSagas[a];r.mode&&r.mode!==d&&(r.task.cancel(),e.injectedSagas[a]="done")}}}function E(e){return Object(u.a)(e),{injectSaga:v(e,!0),ejectSaga:g(e,!0)}}a.d(t,"a",(function(){return C}));var C=function(e){var t=e.key,a=e.saga,r=e.mode,o=n.a.useContext(c.b);n.a.useEffect((function(){var e=E(o.store);return e.injectSaga(t,{saga:a,mode:r}),function(){e.ejectSaga(t)}}),[])}}}]);
//# sourceMappingURL=18.c929a218.chunk.js.map