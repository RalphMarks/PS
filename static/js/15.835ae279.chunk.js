(window.webpackJsonpps=window.webpackJsonpps||[]).push([[15],{373:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(91),o=a.n(c),i=a(17),s=a(10),l=a(71),u=a(72),m=a(75),d=a(79),p=a(76),f=a(89),v="ps/UltimatePage/LOAD_PRODUCT",b="ps/UltimatePage/CHANGE_FORM_STATE",g="ps/UltimatePage/CHANGE_MOD_NAME",_="ps/UltimatePage/CHANGE_MOD_TYPE",h="ps/UltimatePage/SAVE_MOD",E="ps/UltimatePage/ADD_MOD",O="ps/UltimatePage/CHANGE_OPT_NAME",y="ps/UltimatePage/CHANGE_OPT_PRICE",j="ps/UltimatePage/SAVE_OPT",S="ps/UltimatePage/ADD_OPT";function k(e){return{type:E,product:e}}function C(e){return{type:S,product:e}}var x=a(80),P={product:{name:"",modifiers:[]},is_vsbl_crt_mod:!1,is_vsbl_crt_opt:!1,mod_name:"",mod_type:"",mod_to_add_opt:"",opt_name:"",opt_price:""},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;return Object(x.a)(e,(function(e){switch(t.type){case v:e.product=t.product;break;case g:e.mod_name=t.name;break;case _:e.mod_type=t.mod_type;break;case h:break;case E:e.product=t.product,e.is_vsbl_crt_mod=!1,e.mod_name="",e.mod_type="";break;case b:switch(t.form){case"crt_mod":e.is_vsbl_crt_mod=t.new_state;break;case"crt_opt":e.is_vsbl_crt_opt=t.new_state,e.mod_to_add_opt=t.opts}break;case O:e.opt_name=t.name;break;case y:e.opt_price=t.price;break;case j:break;case S:e.product=t.product,e.is_vsbl_crt_opt=!1,e.opt_name="",e.opt_price=""}}))},N=function(e){return e.ultimate||P},T=function(){return Object(u.a)(N,(function(e){return e.product}))},M=function(){return Object(u.a)(N,(function(e){return{name:e.mod_name,type:e.mod_type,is_assigned:!1,order:-1,options:[]}}))},A=function(){return Object(u.a)(N,(function(e){return{name:e.opt_name,price:e.opt_price}}))},D=function(){return Object(u.a)(N,(function(e){return e.mod_to_add_opt}))},R=a(85),I=a.n(R),U=a(86),F=a(77),L=I.a.mark(z),B=I.a.mark(G),H=I.a.mark(q);function z(){var e,t,a,n,r;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(U.c)(M());case 2:return e=c.sent,c.next=5,Object(U.c)(T());case 5:return t=c.sent,a="".concat(Object(l.a)(),"/products/").concat(t._id),c.prev=7,n=localStorage.getItem("PointOfSaleToken"),t.modifiers=t.modifiers.concat([e]),c.next=12,Object(U.a)(F.a,a,{body:JSON.stringify(t),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},method:"PATCH"});case 12:return r=c.sent,console.log("saga"),console.log(r),c.next=17,Object(U.b)(k(r));case 17:c.next=23;break;case 19:c.prev=19,c.t0=c.catch(7),console.log("err"),console.log(c.t0);case 23:case"end":return c.stop()}}),L,null,[[7,19]])}function G(){var e,t,a,n,r,c,o,i;return I.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,Object(U.c)(A());case 2:return e=s.sent,s.next=5,Object(U.c)(D());case 5:return t=s.sent,s.next=8,Object(U.c)(T());case 8:return a=s.sent,n="".concat(Object(l.a)(),"/products/").concat(a._id),s.prev=10,r=localStorage.getItem("PointOfSaleToken"),c=a.modifiers.find((function(e){return e.name===t})),o=a.modifiers.findIndex((function(e){return e.name===t})),c.options.push(e),a.modifiers[o]=c,s.next=18,Object(U.a)(F.a,n,{body:JSON.stringify(a),headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(r)},method:"PATCH"});case 18:return i=s.sent,console.log("saga"),console.log(i),s.next=23,Object(U.b)(C(i));case 23:s.next=29;break;case 25:s.prev=25,s.t0=s.catch(10),console.log("err"),console.log(s.t0);case 29:case"end":return s.stop()}}),B,null,[[10,25]])}function q(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(U.d)(h,z);case 2:return e.next=4,Object(U.d)(j,G);case 4:case"end":return e.stop()}}),H)}a.d(t,"UltimateSingle",(function(){return K})),a.d(t,"mapDispatchToProps",(function(){return X}));var J="ultimate",V=function(e){var t=e.modifier,a=e.onChangeFormState;return r.a.createElement("div",{className:"card",style:{width:"240px",margin:"8px"}},r.a.createElement("div",{class:"modal-header"},r.a.createElement("span",null,t.name),r.a.createElement("span",null,function(e){switch(e){case"0":return"Opcional";case"1":return"Obligatorio";case"2":return"Seleccion multiple"}}(t.type))),r.a.createElement("div",{className:"card-body"},t.options.map((function(e){return r.a.createElement("span",{class:"badge badge-info",style:{width:"100%",height:"32px",padding:"8px"}},r.a.createElement("span",{style:{float:"left",fontSize:"16px"}},e.name),r.a.createElement("span",{style:{float:"right",fontSize:"16px"}},e.price))}))),r.a.createElement("div",{className:"btn btn-dark",style:{position:"relative",width:"88%",bottom:"10px",margin:"auto"},onClick:function(){return a("crt_opt",!0,t.name)}},"+"))},W=function(e){var t=e.new_modifier,a=e.onChangeFormState,n=e.onChangeMod,c=e.onSaveMod;return r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"exampleModalLiveLabel"},"Crear Modificador"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return a("crt_mod",!1)}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1"},"Nombre del Bloque"),r.a.createElement("input",{type:"text",class:"form-control",placeholder:"Nombre del Bloque",value:t.name,onChange:function(e){return n("name",e.target.value)}})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",null,"Tipo"),r.a.createElement("select",{class:"custom-select",value:t.type,onChange:function(e){return n("type",e.target.value)}},r.a.createElement("option",{value:""},"Tipos de Modificador"),r.a.createElement("option",{value:"0"},"Opcional"),r.a.createElement("option",{value:"1"},"Obligatorio"),r.a.createElement("option",{value:"2"},"Seleccion Multiple"))),r.a.createElement("div",{className:"btn btn-dark",onClick:c},"Crear Bloque")))},Y=function(e){var t=e.new_option,a=e.onChangeFormState,n=e.onChangeOption,c=e.onSaveOpt;return r.a.createElement("div",{class:"modal-content"},r.a.createElement("div",{class:"modal-header"},r.a.createElement("h5",{class:"modal-title",id:"exampleModalLiveLabel"},"Crear Opcion"),r.a.createElement("button",{type:"button",class:"close","data-dismiss":"modal","aria-label":"Close",onClick:function(){return a("crt_opt",!1)}},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),r.a.createElement("div",{class:"modal-body"},r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1"},"Nombre de la opcion"),r.a.createElement("input",{type:"text",class:"form-control",placeholder:"Nombre de la opcion",value:t.name,onChange:function(e){return n("name",e.target.value)}})),r.a.createElement("div",{class:"form-group"},r.a.createElement("label",{for:"exampleInputEmail1"},"Precio"),r.a.createElement("input",{type:"text",class:"form-control",placeholder:"Precio",value:t.price,onChange:function(e){return n("price",e.target.value)}})),r.a.createElement("div",{className:"btn btn-dark",onClick:c},"Crear Opcion")))};function K(e){var t,a,c=e.product,i=e.new_modifier,s=e.match,u=e.form_status,v=(e.chosen_modifier,e.new_option),b=e.onChangeFormState,g=e.onChangeMod,_=e.onLoadProduct,h=e.onSaveMod,E=e.onChangeOption,O=e.onSaveOpt;return Object(m.a)({key:J,reducer:w}),Object(d.a)({key:J,saga:q}),Object(n.useEffect)((function(){var e="".concat(Object(l.a)(),"/products/").concat(s.params.productId);try{var t=localStorage.getItem("PointOfSaleToken");o.a.get(e,{headers:{Authorization:"Bearer ".concat(t)}}).then((function(e){var t=e.data;console.log(t),_(t)}))}catch(a){console.log("err"),console.log(a)}}),[]),t=r.a.createElement(W,{new_modifier:i,onChangeFormState:b,onChangeMod:g,onSaveMod:h}),a=r.a.createElement(Y,{new_option:v,onChangeFormState:b,onChangeOption:E,onSaveOpt:O}),r.a.createElement("div",{className:"container-fluid",style:{padding:"0px"}},r.a.createElement(p.a,{is_active:"product"}),r.a.createElement(f.a,{is_visible:u.is_vsbl_crt_mod,children:t}),r.a.createElement(f.a,{is_visible:u.is_vsbl_crt_opt,children:a}),r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-6"},r.a.createElement("h1",null,"Producto: ",c.name)),r.a.createElement("div",{className:"col-6"},r.a.createElement("div",{className:"btn btn-dark",style:{marginTop:"12px"},onClick:function(){return b("crt_mod",!0)}},"Crear Bloque"))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",style:{display:"flex",flexWrap:"wrap",justifyContent:"center"}},c.modifiers.map((function(e){return r.a.createElement("div",null,r.a.createElement(V,{modifier:e,onChangeFormState:b}))})))))}var Q=Object(u.b)({product:T(),form_status:Object(u.a)(N,(function(e){return{is_vsbl_crt_mod:e.is_vsbl_crt_mod,is_vsbl_crt_opt:e.is_vsbl_crt_opt}})),new_modifier:M(),chosen_modifier:D(),new_option:A()});function X(e){return{onLoadProduct:function(t){return e(function(e){return{type:v,product:e}}(t))},onChangeFormState:function(t,a,n){e(function(e,t,a){return{type:b,form:e,new_state:t,opts:a}}(t,a,n)),console.log("change")},onChangeMod:function(t,a){return e(function(e,t){switch(e){case"name":return{type:g,name:t};case"type":return{type:_,mod_type:t}}}(t,a))},onSaveMod:function(){return e({type:h})},onChangeOption:function(t,a){return e(function(e,t){switch(e){case"name":return{type:O,name:t};case"price":return{type:y,price:t}}}(t,a))},onSaveOpt:function(){return e({type:j})}}}var Z=Object(i.c)(Q,X);t.default=Object(s.d)(Z,n.memo)(K)},70:function(e,t,a){"use strict";function n(e){return!0}a.d(t,"a",(function(){return n}))},71:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(){return"https://e7c274ef.ngrok.io"}},75:function(e,t,a){"use strict";a(64),a(65),a(68),a(66),a(69);var n=a(0),r=a.n(n),c=(a(14),a(17)),o=a(1),i=a.n(o),s=a(74),l=a(70),u=a(30);function m(e,t){return function(a,n){t||Object(l.a)(e),i()(Object(s.isString)(a)&&!Object(s.isEmpty)(a)&&Object(s.isFunction)(n),"(src/utils...) injectReducer: Expected `reducer` to be a reducer function"),Reflect.has(e.injectedReducers,a)&&e.injectedReducers[a]===n||(e.injectedReducers[a]=n,e.replaceReducer(Object(u.a)(e.injectedReducers)))}}function d(e){return Object(l.a)(e),{injectReducer:m(e,!0)}}a.d(t,"a",(function(){return p}));var p=function(e){var t=e.key,a=e.reducer,n=r.a.useContext(c.b);r.a.useEffect((function(){d(n.store).injectReducer(t,a)}),[])}},76:function(e,t,a){"use strict";var n=a(64),r=a(65),c=a(68),o=a(66),i=a(69),s=a(0),l=a.n(s),u=a(5),m=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(c.a)(this,Object(o.a)(t).call(this,e))).state={is_loggedIn:!0},a}return Object(i.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},this.state.is_loggedIn?null:l.a.createElement(u.a,{to:"/PS/login"}),l.a.createElement("a",{className:"navbar-brand",href:"#"},"PS"),l.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},l.a.createElement("span",{className:"navbar-toggler-icon"})),l.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarText"},l.a.createElement("ul",{className:"navbar-nav mr-auto"},l.a.createElement("li",{className:"dashboard"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/dashboard"},"Dashboard")),l.a.createElement("li",{className:"employees"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/employees"},"Employees")),l.a.createElement("li",{className:"product"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/ultimate"},"Products")),l.a.createElement("li",{className:"analytics"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/analytics"},"Analytics")),l.a.createElement("li",{className:"flow"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/flow"},"Flujo")),l.a.createElement("li",{className:"cash"===this.props.is_active?"nav-item active":"nav-item"},l.a.createElement("a",{className:"nav-link",href:"/PS/cash"},"Caja"))),l.a.createElement("span",{className:"navbar-text",style:{cursor:"pointer"},onClick:function(){localStorage.removeItem("PointOfSaleToken"),e.setState({is_loggedIn:!1})}},"Cerrar Sesi\xf3n")))}}]),t}(l.a.Component);t.a=m},77:function(e,t,a){"use strict";function n(e){return 204===e.status||205===e.status?null:e.json()}function r(e){if(e.status>=200&&e.status<300)return e;var t=new Error(e.statusText);throw t.response=e,t}function c(e,t){return fetch(e,t).then(r).then(n)}a.d(t,"a",(function(){return c}))},79:function(e,t,a){"use strict";a(64),a(65),a(68),a(66),a(69);var n=a(0),r=a.n(n),c=(a(14),a(17)),o=a(31),i=a(1),s=a.n(i),l=a(74),u=a(70),m="@@saga-injector/daemon",d="@@saga-injector/once-till-unmount";function p(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function f(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?p(a,!0).forEach((function(t){Object(o.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):p(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var v=function(e){return s()(Object(l.isString)(e)&&!Object(l.isEmpty)(e),"(app/utils...) injectSaga: Expected `key` to be a non empty string")};function b(e,t){return function(a){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;t||Object(u.a)(e);var c=f({},n,{mode:n.mode||m}),o=c.saga,i=c.mode;v(a);var s=Reflect.has(e.injectedSagas,a);(!s||s&&i!==m&&i!==d)&&(e.injectedSagas[a]=f({},c,{task:e.runSaga(o,r)}))}}function g(e,t){return function(a){if(t||Object(u.a)(e),v(a),Reflect.has(e.injectedSagas,a)){var n=e.injectedSagas[a];n.mode&&n.mode!==m&&(n.task.cancel(),e.injectedSagas[a]="done")}}}function _(e){return Object(u.a)(e),{injectSaga:b(e,!0),ejectSaga:g(e,!0)}}a.d(t,"a",(function(){return h}));var h=function(e){var t=e.key,a=e.saga,n=e.mode,o=r.a.useContext(c.b);r.a.useEffect((function(){var e=_(o.store);return e.injectSaga(t,{saga:a,mode:n}),function(){e.ejectSaga(t)}}),[])}},89:function(e,t,a){"use strict";var n=a(0),r=a.n(n),c=a(23),o=a.n(c);t.a=function(e){var t=e.is_visible,a=e.children;return o.a.createPortal(r.a.createElement("div",{class:"modal show fade",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLiveLabel","aria-modal":"true",style:{display:t?"block":"none",opacity:t?1:0,backgroundColor:"rgba(0,0,0,0.5)"}},r.a.createElement("div",{class:"modal-dialog",role:"document"},a)),document.body)}}}]);
//# sourceMappingURL=15.835ae279.chunk.js.map